(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[293],{1:function(e,t,a){Promise.resolve().then(a.bind(a,8503))},8503:function(e,t,a){"use strict";a.d(t,{HelperProfileForm:function(){return m}});var n=a(5853),i=a(3939),s=a(5172),r=a(2505),l=a(4254),o=a(8144);function d(e){let{text:t,target:a,onTranslated:i}=e,[s,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(null);return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{type:"button",className:"rounded border px-3 py-2 text-sm",disabled:s||!t.trim(),onClick:async()=>{r(!0),c(null);try{let e=await (0,o.S)("/translate",{method:"POST",body:{text:t,target:a}});i(e.translatedText)}catch(t){var e;c(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"Translate failed")}finally{r(!1)}},children:s?"Translating…":"Translate → ".concat("zh"===a?"中文":"English")}),d?(0,n.jsx)("div",{className:"text-xs text-red-600",children:d}):null]})}function c(e){let{name:t,options:a,values:i,onChange:s}=e;return(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:a.map(e=>{let t=i.includes(e);return(0,n.jsxs)("label",{className:"flex items-center gap-2 rounded border p-2 text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:t,onChange:t=>{t.target.checked?s([...i,e]):s(i.filter(t=>t!==e))}}),(0,n.jsx)("span",{children:e})]},e)})})}function m(){var e;let[t,a]=(0,l.useState)(""),[m,u]=(0,l.useState)(null),p=(0,l.useMemo)(()=>({photoUrl:"https://placehold.co/256x256",countryOfOrigin:"Philippines",ageRange:"26-35",experienceYears:"2-3",experienceDetails:["Cleaning"],workedCountries:["Hong Kong"],familySituation:"Single",personalityTraits:["Hardworking"],whatsapp:"+85291234567",contractEndDate:new Date().toISOString().slice(0,10),availableStartDate:new Date().toISOString().slice(0,10),previousContractType:"Finished Contract",bio:"",recommendationLetterUrl:"",facebookProfileLink:"",cookingPhotosLink:"",videosLink:""}),[]),{register:x,handleSubmit:h,watch:f,setValue:v,formState:{errors:y,isSubmitting:g}}=(0,r.cI)({resolver:(0,i.F)(s.Gd),defaultValues:p}),b=null!==(e=f("bio"))&&void 0!==e?e:"";return(0,n.jsxs)("form",{className:"space-y-4",onSubmit:h(async e=>{u(null);try{await (0,o.S)("/helpers/me/profile",{method:"PUT",token:t,body:e}),u("Saved")}catch(e){var a;u(null!==(a=null==e?void 0:e.message)&&void 0!==a?a:"Save failed")}}),children:[(0,n.jsxs)("div",{className:"rounded border p-3",children:[(0,n.jsx)("div",{className:"text-sm font-semibold",children:"Auth token"}),(0,n.jsx)("input",{className:"mt-2 w-full rounded border px-3 py-2",value:t,onChange:e=>a(e.target.value),placeholder:"Paste JWT from /auth/login"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Front-facing photo URL"}),(0,n.jsx)("input",{className:"mt-1 w-full rounded border px-3 py-2",...x("photoUrl")}),y.photoUrl?(0,n.jsx)("div",{className:"text-xs text-red-600",children:y.photoUrl.message}):null]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Country of origin"}),(0,n.jsx)("select",{className:"mt-1 w-full rounded border px-3 py-2",...x("countryOfOrigin"),children:s.BJ.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Age"}),(0,n.jsx)("select",{className:"mt-1 w-full rounded border px-3 py-2",...x("ageRange"),children:s.qO.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Years of work experience"}),(0,n.jsx)("select",{className:"mt-1 w-full rounded border px-3 py-2",...x("experienceYears"),children:s.wY.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-semibold",children:"Work experience details"}),(0,n.jsx)(c,{name:"experienceDetails",options:s.Er,values:f("experienceDetails"),onChange:e=>v("experienceDetails",e,{shouldValidate:!0})}),y.experienceDetails?(0,n.jsx)("div",{className:"text-xs text-red-600",children:y.experienceDetails.message}):null]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-semibold",children:"Countries worked in"}),(0,n.jsx)(c,{name:"workedCountries",options:s.Ql,values:f("workedCountries"),onChange:e=>v("workedCountries",e,{shouldValidate:!0})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Family situation"}),(0,n.jsx)("select",{className:"mt-1 w-full rounded border px-3 py-2",...x("familySituation"),children:s.VK.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-semibold",children:"Personality traits"}),(0,n.jsx)(c,{name:"personalityTraits",options:s.OI,values:f("personalityTraits"),onChange:e=>v("personalityTraits",e,{shouldValidate:!0})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"WhatsApp contact"}),(0,n.jsx)("input",{className:"mt-1 w-full rounded border px-3 py-2",...x("whatsapp"),placeholder:"+85291234567"}),y.whatsapp?(0,n.jsx)("div",{className:"text-xs text-red-600",children:y.whatsapp.message}):null]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Contract end date"}),(0,n.jsx)("input",{className:"mt-1 w-full rounded border px-3 py-2",type:"date",...x("contractEndDate")})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-semibold",children:"Available start date"}),(0,n.jsx)("input",{className:"mt-1 w-full rounded border px-3 py-2",type:"date",...x("availableStartDate")})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-semibold",children:"Previous contract type"}),(0,n.jsx)("div",{className:"mt-2 flex flex-col gap-2",children:s.FT.map(e=>(0,n.jsxs)("label",{className:"flex items-center gap-2 rounded border p-2 text-sm",children:[(0,n.jsx)("input",{type:"radio",value:e,...x("previousContractType")}),(0,n.jsx)("span",{children:e})]},e))})]}),(0,n.jsxs)("div",{className:"rounded border p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,n.jsx)("div",{className:"text-sm font-semibold",children:"Bio (optional)"}),(0,n.jsx)(d,{text:b,target:"zh",onTranslated:e=>v("bio",e,{shouldValidate:!0})})]}),(0,n.jsx)("textarea",{className:"mt-2 w-full rounded border px-3 py-2",rows:3,...x("bio")})]}),(0,n.jsx)("button",{type:"submit",disabled:g,className:"w-full rounded bg-slate-900 px-4 py-3 text-white",children:g?"Saving…":"Save profile"}),m?(0,n.jsx)("div",{className:"text-sm",children:m}):null]})}},8144:function(e,t,a){"use strict";var n;a.d(t,{S:function(){return s}});let i=null!==(n=a(3206).env.NEXT_PUBLIC_API_URL)&&void 0!==n?n:"https://api.sosohelper.com";async function s(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=await fetch("".concat(i).concat(e),{method:null!==(t=a.method)&&void 0!==t?t:"GET",headers:{"content-type":"application/json",...a.token?{authorization:"Bearer ".concat(a.token)}:{}},body:a.body?JSON.stringify(a.body):void 0,cache:"no-store"}),s=await n.json();if(!s.ok)throw Error(s.error.message);return s}},5172:function(e,t,a){"use strict";a.d(t,{qO:function(){return i},FT:function(){return c},BJ:function(){return n},Er:function(){return r},wY:function(){return s},VK:function(){return o},OI:function(){return d},Ql:function(){return l},Gd:function(){return x}});let n=["Philippines","Indonesia","Thailand","Sri Lanka","Nepal","Vietnam","Myanmar","Other"],i=["18-25","26-35","36-45","46-55","56+"],s=["0-1","2-3","4-5","6-8","9+"],r=["Childcare","Elderly care","Cooking","Cleaning","Driving","Gardening"],l=["Hong Kong","Singapore","UAE","Saudi Arabia","Qatar","Malaysia","Taiwan","Other"],o=["Single","Married","Married with children","Single parent"],d=["Friendly","Hardworking","Patient","Honest","Calm","Good with kids","Good with elderly"],c=["Finished Contract","Break Contract"];var m=a(8511);let u=m.Z_().trim().regex(/^\+[1-9]\d{7,14}$/,"WhatsApp must be in international format like +85291234567"),p=m.Z_().trim().url().optional().or(m.i0("")),x=m.Ry({photoUrl:m.Z_().trim().url(),countryOfOrigin:m.Km(n),ageRange:m.Km(i),experienceYears:m.Km(s),experienceDetails:m.IX(m.Km(r)).min(1),workedCountries:m.IX(m.Km(l)).min(1),familySituation:m.Km(o),personalityTraits:m.IX(m.Km(d)).min(1),whatsapp:u,contractEndDate:m.Z_().date(),availableStartDate:m.Z_().date(),previousContractType:m.Km(c),bio:m.Z_().trim().max(800).optional().or(m.i0("")),recommendationLetterUrl:m.Z_().trim().url().optional().or(m.i0("")),facebookProfileLink:p,cookingPhotosLink:p,videosLink:p});m.Ry({countryOfOrigin:m.Km(n).optional(),ageRange:m.Km(i).optional(),experienceYears:m.Km(s).optional(),experienceDetails:m.IX(m.Km(r)).optional(),personalityTraits:m.IX(m.Km(d)).optional(),availableFrom:m.Z_().date().optional(),availableTo:m.Z_().date().optional(),onlineOnly:m.oQ.boolean().optional()}),m.Ry({familyComposition:m.Ry({childrenCount:m.Rx().int().min(0).max(10),childrenAgeRanges:m.IX(m.Km(["0-2","3-5","6-12","13-17"])).optional().default([])}),location:m.Km(["Central","Kowloon","New Territories","Hong Kong Island","Other"]),houseSize:m.Km(["Small","Medium","Large"]),separateRoom:m.O7(),weeklyOffDays:m.IX(m.Km(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"])).min(1),tasks:m.IX(m.Km(["Housework","Childcare","Elderly care","Driving","Gardening"])).min(1),whatsapp:u,jobDescription:m.Z_().trim().max(1200).optional().or(m.i0(""))}),m.Ry({helperUserId:m.Z_().uuid(),category:m.Km(["Contacted","Under Review","Favorite"])}),m.Ry({text:m.Z_().min(1).max(5e3),target:m.Km(["en","zh"]),source:m.Km(["en","zh"]).optional()})}},function(e){e.O(0,[808,939,285,749,744],function(){return e(e.s=1)}),_N_E=e.O()}]);